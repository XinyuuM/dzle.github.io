<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Xinyuu的自由天空</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Xinyuu的自由天空">
<meta property="og:url" content="https://xinyuu.socomic.net/index.html">
<meta property="og:site_name" content="Xinyuu的自由天空">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Xinyuu">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Xinyuu的自由天空" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Xinyuu的自由天空</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">HI Morning</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://xinyuu.socomic.net"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-eNSP使用SSH登录防火墙" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/03/eNSP%E4%BD%BF%E7%94%A8SSH%E7%99%BB%E5%BD%95%E9%98%B2%E7%81%AB%E5%A2%99/" class="article-date">
  <time class="dt-published" datetime="2023-03-03T01:11:15.000Z" itemprop="datePublished">2023-03-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/03/03/eNSP%E4%BD%BF%E7%94%A8SSH%E7%99%BB%E5%BD%95%E9%98%B2%E7%81%AB%E5%A2%99/">eNSP使用SSH登录防火墙</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>SSH登录与Telnet的配置基本相同，这里不多做赘述，</p>
<p>只列出Telnet没有或不同的代码块，具体方法请参考Telnet配置</p>
<p>需要在接口配置SSH服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">int g1/0/0</span><br><span class="line">ip add 192.168.1.1 24</span><br><span class="line">#开启连接</span><br><span class="line">undo shutdown </span><br><span class="line">#Info: Interface GigabitEthernet0/0/0 is not shutdown.</span><br><span class="line">#允许ssh访问</span><br><span class="line">service-manage enable           </span><br><span class="line">#打开接口的ssh管理</span><br><span class="line">service-manage ssh permit</span><br><span class="line">quit</span><br></pre></td></tr></table></figure>

<p>需要创建密钥对</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rsa local-key-pair create</span><br><span class="line"></span><br><span class="line">The key name will be: USG6000V1_Host</span><br><span class="line">The range of public key size is (512 ~ 2048). </span><br><span class="line">NOTES: If the key modulus is greater than 512, </span><br><span class="line">       it will take a few minutes.</span><br><span class="line">输入默认的密钥长度，默认值为2048             </span><br><span class="line">Input the bits in the modulus[default = 2048]:</span><br><span class="line">Generating keys...</span><br><span class="line">.+++++</span><br><span class="line">........................++</span><br><span class="line">....++++</span><br><span class="line">...........++</span><br></pre></td></tr></table></figure>

<p>需要指定验证方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user-interface vty 0 4</span><br><span class="line">authentication-mode aaa             </span><br><span class="line">protocol inbound ssh</span><br><span class="line">quit</span><br></pre></td></tr></table></figure>

<p>需要指定SSH用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh user liuxinyu  </span><br><span class="line">ssh user liuxinyu authentication-type password</span><br></pre></td></tr></table></figure>

<p>需要配置服务类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">aaa</span><br><span class="line">#创建本地用户test，用自己的汉语拼音全名替换test。</span><br><span class="line">manager-user test</span><br><span class="line">password cipher test@123</span><br><span class="line">#Info: You are advised to config on man-machine mode.</span><br><span class="line">service-type ssh</span><br><span class="line">level 3</span><br><span class="line">quit</span><br><span class="line">quit</span><br></pre></td></tr></table></figure>

<p>需要开启SSH服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stelnet server enable</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://xinyuu.socomic.net/2023/03/03/eNSP%E4%BD%BF%E7%94%A8SSH%E7%99%BB%E5%BD%95%E9%98%B2%E7%81%AB%E5%A2%99/" data-id="cles910ro000038sx8ddx5qs7" data-title="eNSP使用SSH登录防火墙" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eNSP/" rel="tag">eNSP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99/" rel="tag">华为防火墙</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-eNSP交换机VLAN配置" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/02/eNSP%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%85%8D%E7%BD%AE/" class="article-date">
  <time class="dt-published" datetime="2023-03-02T14:00:24.000Z" itemprop="datePublished">2023-03-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/03/02/eNSP%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%85%8D%E7%BD%AE/">eNSP交换机VLAN配置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><em><strong>这是一个尚未完成编辑的文档！</strong></em></p>
<p>这个文档尚未完成编辑，部分文字描述不够全面！</p>
<p>谨供参考！</p>
<h4 id="在这之前"><a href="#在这之前" class="headerlink" title="在这之前"></a>在这之前</h4><p><strong>hybrid是华为网络设备专有接口。</strong>同时兼有Access接口和Trunk接口的功能，这里重点介绍hybrid。</p>
<p>要了解hybrid如何工作，详见<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_47153988/article/details/106474693">华为Hybrid接口详解（原理+配置）_hybrid端口配置及解释_长恋离亭的博客-CSDN博客</a></p>
<h4 id="拓扑图"><a href="#拓扑图" class="headerlink" title="拓扑图"></a>拓扑图</h4><p><img src="https://img1.socomic.net/static/Snipaste_2023-03-02_23-28-37.png"></p>
<h5 id="配置说明"><a href="#配置说明" class="headerlink" title="配置说明"></a>配置说明</h5><p>PC4与PC5属于同一VLAN，PC2与PC9属于同一vlan。PC1的vlan10 与所有机器互通，vlan 20 与vlan 30 的机器不互通</p>
<h4 id="交换机的配置"><a href="#交换机的配置" class="headerlink" title="交换机的配置"></a>交换机的配置</h4><h5 id="创建VLAN"><a href="#创建VLAN" class="headerlink" title="创建VLAN"></a>创建VLAN</h5><p>在华为交换机中，创建vlan有以下几种方式：</p>
<p>创建单个vlan   <code>vlan 10</code> &#x2F;&#x2F; 创建编号为 10 的VLAN（不常用）<br>批量创建VLAN   <code>vlan batch 10 20 </code> &#x2F;&#x2F;创建编号为10 和 20 的VLAN<br>或者  <code>vlan batch 50 to 55</code> &#x2F;&#x2F;创建编号50到55的VLAN</p>
<p>我们需要给两台交换机都创建三个VLAN：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]vlan batch 10 20 30</span><br><span class="line">Info: This operation may take a few seconds. Please wait for a moment...done.</span><br></pre></td></tr></table></figure>



<h3 id="端口的配置"><a href="#端口的配置" class="headerlink" title="端口的配置"></a>端口的配置</h3><h5 id="hybrid"><a href="#hybrid" class="headerlink" title="hybrid"></a>hybrid</h5><h6 id="hybrid链路的工作原理"><a href="#hybrid链路的工作原理" class="headerlink" title="hybrid链路的工作原理"></a>hybrid链路的工作原理</h6><p>hybrid链路是网络设备与终端之间的通讯链路。</p>
<p>untag列表<br>交换机接口可设置untag列表，当数据从接口出去时，会查看untag表，若表中存在对应标签，则会脱掉标签，放通数据。若表中没有对应标签，则会查看tag表。若存在对应标签，则会放通，若不存在，则丢弃数据。</p>
<p>tag列表<br>交换机接口可设置tag列表，当数据进入接口是，会查看数据有无标签，若没有标签，则会打上PVID标签，放通，若有标签，会查看tag表是否存在对应标签，若存在，则放通，若不存在则丢弃。</p>
<p>PVID<br>交换机接口可设置PVID，数据进入接口时，会查看数据是否有标签，若没有标签，则会打上PVID标签，放通，若有标签，则会查看tag表。</p>
<h6 id="配置端口"><a href="#配置端口" class="headerlink" title="配置端口"></a>配置端口</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]interface Ethernet 0/0/3</span><br><span class="line">[Huawei-Ethernet0/0/3]port hybrid pvid vlan 10 //把端口加入到 vlan 10</span><br><span class="line">[Huawei-Ethernet0/0/3]port hybrid untagged vlan all</span><br></pre></td></tr></table></figure>

<p>这里有一个参数需要注意 ：<code>untagged</code></p>
<p><code>untagged</code>的工作模式：</p>
<p><code>untagged</code>的功能就是把指定数据的tag标签去除，让数据包从这个端口流出</p>
<p><code>untagged</code> 参数后面跟着  <code>vlan all</code> 就是允许所有 vlan 从这个端口流出。</p>
<p>同理，如果要指定某个带标签的数据剥离标签并从该口流出，只需要在<code>untagged</code> 参数后面跟着VLAN 编号就行。比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">port hybrid untagged vlan 10 //剥离tag pvid 为 10 的 数据包，并从该口流出</span><br><span class="line">port hybrid untagged vlan 10 20 //剥离tag pvid 为 10和20 的 数据包，并从该口流出</span><br></pre></td></tr></table></figure>

<p>这样我们就配置好一个接口了。</p>
<p>根据描述，我们可以按照上面的方式配置其它端口。</p>
<h5 id="trunk链路"><a href="#trunk链路" class="headerlink" title="trunk链路"></a>trunk链路</h5><p>trunk链路是网络设备间的通讯链路。</p>
<p>在上面的拓扑图中，两个交换机的配置相同。<strong>GigabitEthernet0&#x2F;0&#x2F;1</strong>是两个网络设备间的物理连接口。所以我们进入到这个端口进行配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]int g 0/0/1</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port link-type trunk //华为交换机默认走hybrid协议，这条命令将端口改为通用的trunk协议。</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]port trunk allow-pass vlan all//允许所有vlan通过</span><br></pre></td></tr></table></figure>

<p>配置完成后，我们输入<code>display this</code> 查看一下目前端口的配置状况：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Huawei-GigabitEthernet0/0/1]display this </span><br><span class="line">#</span><br><span class="line">interface GigabitEthernet0/0/1</span><br><span class="line"> port link-type trunk</span><br><span class="line"> port trunk allow-pass vlan 2 to 4094</span><br><span class="line">#</span><br><span class="line">return</span><br><span class="line">[Huawei-GigabitEthernet0/0/1]</span><br></pre></td></tr></table></figure>

<p><strong>done！</strong></p>
<h5 id="access链路"><a href="#access链路" class="headerlink" title="access链路"></a>access链路</h5><p>这里简单了解一下access链路在端口的配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">port link-type access </span><br><span class="line">port port default vlan [ID]</span><br></pre></td></tr></table></figure>



<h4 id="查看两台交换机的接口配置"><a href="#查看两台交换机的接口配置" class="headerlink" title="查看两台交换机的接口配置"></a>查看两台交换机的接口配置</h4><p>SW1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;display port vlan </span><br><span class="line">Port                    Link Type    PVID  Trunk VLAN List</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Ethernet0/0/1           hybrid       30    -                                   </span><br><span class="line">Ethernet0/0/2           hybrid       20    -                                   </span><br><span class="line">Ethernet0/0/3           hybrid       10    -                                   </span><br><span class="line">Ethernet0/0/4           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/5           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/6           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/7           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/8           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/9           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/10          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/11          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/12          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/13          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/14          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/15          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/16          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/17          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/18          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/19          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/20          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/21          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/22          hybrid       1     -                                   </span><br><span class="line">GigabitEthernet0/0/1    trunk        1     1-4094</span><br><span class="line">GigabitEthernet0/0/2    hybrid       1     -                                   </span><br><span class="line">&lt;Huawei&gt;</span><br></pre></td></tr></table></figure>

<p>SW2</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;display port vlan </span><br><span class="line">Port                    Link Type    PVID  Trunk VLAN List</span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Ethernet0/0/1           hybrid       20    -                                   </span><br><span class="line">Ethernet0/0/2           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/3           hybrid       30    -                                   </span><br><span class="line">Ethernet0/0/4           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/5           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/6           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/7           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/8           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/9           hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/10          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/11          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/12          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/13          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/14          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/15          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/16          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/17          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/18          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/19          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/20          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/21          hybrid       1     -                                   </span><br><span class="line">Ethernet0/0/22          hybrid       1     -                                   </span><br><span class="line">GigabitEthernet0/0/1    trunk        1     1-4094</span><br><span class="line">GigabitEthernet0/0/2    hybrid       1     -                                   </span><br><span class="line">&lt;Huawei&gt;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://xinyuu.socomic.net/2023/03/02/eNSP%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%85%8D%E7%BD%AE/" data-id="cles919l0000338sxe06u2iaj" data-title="eNSP交换机VLAN配置" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eNSP/" rel="tag">eNSP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8D%8E%E4%B8%BA%E8%AE%BE%E5%A4%87%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/" rel="tag">华为设备项目实践</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-eNSP使用路由器Telnet连接华为USG6000V防火墙" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/01/eNSP%E4%BD%BF%E7%94%A8%E8%B7%AF%E7%94%B1%E5%99%A8Telnet%E8%BF%9E%E6%8E%A5%E5%8D%8E%E4%B8%BAUSG6000V%E9%98%B2%E7%81%AB%E5%A2%99/" class="article-date">
  <time class="dt-published" datetime="2023-03-01T11:54:22.000Z" itemprop="datePublished">2023-03-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/03/01/eNSP%E4%BD%BF%E7%94%A8%E8%B7%AF%E7%94%B1%E5%99%A8Telnet%E8%BF%9E%E6%8E%A5%E5%8D%8E%E4%B8%BAUSG6000V%E9%98%B2%E7%81%AB%E5%A2%99/">eNSP使用路由器Telnet连接华为USG6000V防火墙</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="拓扑图"><a href="#拓扑图" class="headerlink" title="拓扑图"></a>拓扑图</h4><p><img src="https://img1.socomic.net/static/Snipaste_2023-03-01_19-34-41.png"></p>
<h3 id="防火墙配置"><a href="#防火墙配置" class="headerlink" title="防火墙配置"></a>防火墙配置</h3><p>USG6000V1&gt;<code>sys</code><br>[USG6000V1]<code>sysname FW</code></p>
<h4 id="端口配置"><a href="#端口配置" class="headerlink" title="端口配置"></a>端口配置</h4><p>[FW]<code>interface GigabitEthernet 1/0/0</code><br>[FW-GigabitEthernet1&#x2F;0&#x2F;0]<code>ip add 192.168.15.254 24</code><br>[FW-GigabitEthernet1&#x2F;0&#x2F;0]<code>undo shutdown</code><br>[FW-GigabitEthernet1&#x2F;0&#x2F;0]<code>service-manage enable</code><br>[FW-GigabitEthernet1&#x2F;0&#x2F;0]<code>service-manage telnet permit</code><br>[FW-GigabitEthernet1&#x2F;0&#x2F;0]<code>q</code></p>
<h4 id="开启防火墙Telnet服务"><a href="#开启防火墙Telnet服务" class="headerlink" title="开启防火墙Telnet服务"></a>开启防火墙Telnet服务</h4><p>[FW]<code>telnet server enable</code></p>
<h4 id="配置防火墙区域"><a href="#配置防火墙区域" class="headerlink" title="配置防火墙区域"></a>配置防火墙区域</h4><p>[FW]<code>firewall zone trust</code><br>[FW-zone-trust]<code>add interface GigabitEthernet 1/0/0</code><br>[FW-zone-trust]<code>q</code></p>
<h4 id="配置安全策略（重要）"><a href="#配置安全策略（重要）" class="headerlink" title="配置安全策略（重要）"></a>配置安全策略（重要）</h4><p>[FW]<code>security-policy</code></p>
<p>[FW-policy-security]<code>rule name allow_telnet</code></p>
<p>[FW-policy-security-rule-allow_telnet]<code>source-zone trust </code></p>
<p>[FW-policy-security-rule-allow_telnet]<code>destination-zone local</code> </p>
<p>[FW-policy-security-rule-allow_telnet]<code>action permit</code> </p>
<p>[FW-policy-security-rule-allow_telnet]<code>q</code></p>
<p>[FW-policy-security]<code>q</code></p>
<h4 id="Telnet管理员级vty本地用户配置"><a href="#Telnet管理员级vty本地用户配置" class="headerlink" title="Telnet管理员级vty本地用户配置"></a>Telnet管理员级vty本地用户配置</h4><h5 id="vty登录配置"><a href="#vty登录配置" class="headerlink" title="vty登录配置"></a>vty登录配置</h5><p>这里的配置与<a href="https://xinyuu.socomic.net/2023/03/01/eNSP%E4%BD%BF%E7%94%A8Telnet%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/">eNSP使用Telnet登录华为网络设备</a>里的<strong>Telnet管理员级vty本地用户配置&#x2F;vty登录配置</strong>章节基本一致，但仍需注意相关参数可能有细微不同。</p>
<p>[FW]<code>user-interface vty 0 4</code><br>[FW-ui-vty0-4]<code>authentication-mode aaa</code><br>[FW-ui-vty0-4]<code>protocol inbound telnet</code><br>[FW-ui-vty0-4]<code>q</code></p>
<h5 id="启动AAA服务"><a href="#启动AAA服务" class="headerlink" title="启动AAA服务"></a>启动AAA服务</h5><p>这里的配置与<a href="https://xinyuu.socomic.net/2023/03/01/eNSP%E4%BD%BF%E7%94%A8Telnet%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/">eNSP使用Telnet登录华为网络设备</a>里的<strong>Telnet管理员级vty本地用户配置&#x2F;启动AAA服务</strong>章节大同小异，这里需要注意的是，防火墙的管理员密码需要设置得更复杂一些。</p>
<p>[FW]<code>aaa</code><br>[FW-aaa]<code>manager-user liuxinyu</code><br>[FW-aaa-manager-user-liuxinyu]<code>password cipher lxy@123321</code><br>[FW-aaa-manager-user-liuxinyu]<code>service-type telnet</code><br>[FW-aaa-manager-user-liuxinyu]<code>level 15</code><br>[FW-aaa-manager-user-liuxinyu]<code>q</code><br>[FW-aaa]q<br>[FW]q</p>
<h3 id="路由器验证"><a href="#路由器验证" class="headerlink" title="路由器验证"></a>路由器验证</h3><h5 id="IP配置"><a href="#IP配置" class="headerlink" title="IP配置"></a>IP配置</h5><p>这里的配置与<a href="https://xinyuu.socomic.net/2023/03/01/eNSP%E4%BD%BF%E7%94%A8Telnet%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/">eNSP使用Telnet登录华为网络设备</a>里的<strong>TelnetServer配置&#x2F;配置以太网口</strong>的实现方法相同，这里不在赘述。需要注意端口参数可能不同。</p>
<p>退出端口配置模式，进入到用户模式</p>
<h5 id="使用路由器管理Telnet管理防火墙"><a href="#使用路由器管理Telnet管理防火墙" class="headerlink" title="使用路由器管理Telnet管理防火墙"></a>使用路由器管理Telnet管理防火墙</h5><p><code>telnet 防火墙IP</code> </p>
<p>输入之前配置的远程管理用户名与密码即可。</p>
<p><img src="https://img1.socomic.net/static/Snipaste_2023-03-01_19-21-24.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xinyuu.socomic.net/2023/03/01/eNSP%E4%BD%BF%E7%94%A8%E8%B7%AF%E7%94%B1%E5%99%A8Telnet%E8%BF%9E%E6%8E%A5%E5%8D%8E%E4%B8%BAUSG6000V%E9%98%B2%E7%81%AB%E5%A2%99/" data-id="clepsbgqh00053ssx8cj87ipq" data-title="eNSP使用路由器Telnet连接华为USG6000V防火墙" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eNSP/" rel="tag">eNSP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99/" rel="tag">华为防火墙</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-eNSP使用Telnet登录华为网络设备" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/01/eNSP%E4%BD%BF%E7%94%A8Telnet%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/" class="article-date">
  <time class="dt-published" datetime="2023-03-01T03:52:34.000Z" itemprop="datePublished">2023-03-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/03/01/eNSP%E4%BD%BF%E7%94%A8Telnet%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/">eNSP使用Telnet登录华为网络设备</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="使用Telnet远程管理路由器"><a href="#使用Telnet远程管理路由器" class="headerlink" title="使用Telnet远程管理路由器"></a>使用Telnet远程管理路由器</h2><h3 id="简单的Telnet登录"><a href="#简单的Telnet登录" class="headerlink" title="简单的Telnet登录"></a>简单的Telnet登录</h3><h5 id="实验拓扑图"><a href="#实验拓扑图" class="headerlink" title="实验拓扑图"></a>实验拓扑图</h5><p><img src="https://img1.socomic.net/static/Snipaste_2023-03-01_13-30-55.png"></p>
<p>users:AR201 192.168.1.1 &#x2F;24</p>
<p>Server: AR2240 192.168.1.254 &#x2F;24</p>
<h5 id="TelnetServer配置"><a href="#TelnetServer配置" class="headerlink" title="TelnetServer配置"></a>TelnetServer配置</h5><h6 id="进入路由器"><a href="#进入路由器" class="headerlink" title="进入路由器"></a>进入路由器</h6><p>Huawei&gt;<code>sys</code><br>Enter system view, return user view with Ctrl+Z.<br>[Huawei]<code>sysname TelnetServer</code></p>
<h6 id="限制vty人数"><a href="#限制vty人数" class="headerlink" title="限制vty人数"></a>限制vty人数</h6><p>[TelnetServer]<code>user-interface maximum-vty 1</code><br>[TelnetServer]<code>user-int vty 0 5 </code></p>
<h6 id="设置Telnet远程登录密码"><a href="#设置Telnet远程登录密码" class="headerlink" title="设置Telnet远程登录密码"></a>设置Telnet远程登录密码</h6><p>[TelnetServer-ui-vty0]<code>authentication-mode password</code><br>Please configure the login password (maximum length 16):<code>123321</code><br>[TelnetServer-ui-vty0]<code>q</code></p>
<h6 id="配置以太网口"><a href="#配置以太网口" class="headerlink" title="配置以太网口"></a>配置以太网口</h6><p>[TelnetServer]interface g0&#x2F;0&#x2F;0<br>[TelnetServer-GigabitEthernet0&#x2F;0&#x2F;0]<code>ip add 192.198.1.254 24</code></p>
<h5 id="Telnet客户端配置"><a href="#Telnet客户端配置" class="headerlink" title="Telnet客户端配置"></a>Telnet客户端配置</h5><p>进入路由器</p>
<p>Huawei&gt;<code>sys</code></p>
<h5 id="进入vlan端口"><a href="#进入vlan端口" class="headerlink" title="进入vlan端口"></a>进入vlan端口</h5><p>[Huawei]<code>interface vlan 1</code></p>
<h6 id="配置IP"><a href="#配置IP" class="headerlink" title="配置IP"></a>配置IP</h6><p>[Huawei-Vlanif1]<code>ip add 192.168.15.1 24</code></p>
<h6 id="保存退出"><a href="#保存退出" class="headerlink" title="保存退出"></a>保存退出</h6><p>[Huawei-Vlanif1]<code>q</code><br>[Huawei]<code>q</code></p>
<h5 id="测试ping"><a href="#测试ping" class="headerlink" title="测试ping"></a>测试ping</h5><p>[Huawei-Vlanif1]<code>ping 192.168.1.254</code><br>  PING 192.168.15.254: 56  data bytes, press CTRL_C to break<br>    Reply from 192.168.15.254: bytes&#x3D;56 Sequence&#x3D;1 ttl&#x3D;255 time&#x3D;90 ms<br>    Reply from 192.168.15.254: bytes&#x3D;56 Sequence&#x3D;2 ttl&#x3D;255 time&#x3D;20 ms<br>    Reply from 192.168.15.254: bytes&#x3D;56 Sequence&#x3D;3 ttl&#x3D;255 time&#x3D;20 ms<br>    Reply from 192.168.15.254: bytes&#x3D;56 Sequence&#x3D;4 ttl&#x3D;255 time&#x3D;30 ms<br>    Reply from 192.168.15.254: bytes&#x3D;56 Sequence&#x3D;5 ttl&#x3D;255 time&#x3D;10 ms</p>
<h5 id="尝试使用Telnet远程连接TelnetServer"><a href="#尝试使用Telnet远程连接TelnetServer" class="headerlink" title="尝试使用Telnet远程连接TelnetServer"></a>尝试使用Telnet远程连接TelnetServer</h5><p>Huawei&gt;<code>telnet 192.168.1.254</code><br>  Press CTRL_] to quit telnet mode<br>  Trying 192.168.1.254 …<br>  Connected to 192.168.1.254 …</p>
<p>Login authentication</p>
<p>Password:<br>TelnetServer&gt;</p>
<h3 id="Telnet管理员级vty本地用户配置"><a href="#Telnet管理员级vty本地用户配置" class="headerlink" title="Telnet管理员级vty本地用户配置"></a>Telnet管理员级vty本地用户配置</h3><p>通常情况下Telnet配置登录时需要验证账号与密码</p>
<p>于是在简单配置基础基础之上，我们可以使用管员级别的账户来远程配置路由。</p>
<h5 id="Telnet服务器端配置"><a href="#Telnet服务器端配置" class="headerlink" title="Telnet服务器端配置"></a>Telnet服务器端配置</h5><h6 id="启动AAA服务"><a href="#启动AAA服务" class="headerlink" title="启动AAA服务"></a>启动AAA服务</h6><p>TelnetServer&gt;sys</p>
<p>[TelnetServer]<code>aaa</code></p>
<h6 id="在AAA服务器上创建本地登录账号"><a href="#在AAA服务器上创建本地登录账号" class="headerlink" title="在AAA服务器上创建本地登录账号"></a>在AAA服务器上创建本地登录账号</h6><p>账号为lxy ，密码为123321 权限级别为3级</p>
<p>[TelnetServer-aaa]<code>local-user lxy password cipher 123321 privilege level 3</code></p>
<p>[TelnetServer-aaa]<code>local-user lxy service-type telnet</code></p>
<p>[TelnetServer-aaa]<code>q</code></p>
<h6 id="vty登录配置"><a href="#vty登录配置" class="headerlink" title="vty登录配置"></a>vty登录配置</h6><p>[TelnetServer]<code>user-interface vty 0 5</code></p>
<p>[TelnetServer-ui-vty0-5]<code>authentication-mode aaa</code></p>
<h5 id="保存退出-1"><a href="#保存退出-1" class="headerlink" title="保存退出"></a>保存退出</h5><p>[TelnetServer-ui-vty0 5]<code>q</code></p>
<h5 id="Telnet客户端验证"><a href="#Telnet客户端验证" class="headerlink" title="Telnet客户端验证"></a>Telnet客户端验证</h5><p>在简单配置基础基础之上，使用管员级别的账户来远程配置路由。</p>
<p><code>&lt;Huawei&gt;telnet 192.168.1.254</code><br>  Press CTRL_] to quit telnet mode<br>  Trying 192.168.1.254 …<br>  Connected to 192.168.1.254 …</p>
<p>Login authentication</p>
<p>Username:<code>lxy</code><br>Password:<br>TelnetServer&gt;</p>
<h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><h4 id="umooc-gdgm-cn"><a href="#umooc-gdgm-cn" class="headerlink" title="umooc.gdgm.cn"></a>umooc.gdgm.cn</h4><p>华为设备项目实践-<a target="_blank" rel="noopener" href="https://umooc.gdgm.cn/meol/jpk/course/layout/newpage/index.jsp?courseId=12182">0201C-21010-抓取telnet明文密码</a></p>
<p>华为设备项目实践-<a target="_blank" rel="noopener" href="https://umooc.gdgm.cn/meol/jpk/course/layout/newpage/index.jsp?courseId=12182">0201A-21009C-Telnet管理员级vty本地用户配置实验</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xinyuu.socomic.net/2023/03/01/eNSP%E4%BD%BF%E7%94%A8Telnet%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/" data-id="clepsbgqd00023ssx9wl9aqeb" data-title="eNSP使用Telnet登录华为网络设备" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eNSP/" rel="tag">eNSP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8D%8E%E4%B8%BA%E8%AE%BE%E5%A4%87%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/" rel="tag">华为设备项目实践</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-eNSP使用Web登录华为防火墙" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/28/eNSP%E4%BD%BF%E7%94%A8Web%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99/" class="article-date">
  <time class="dt-published" datetime="2023-02-28T08:57:32.000Z" itemprop="datePublished">2023-02-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/28/eNSP%E4%BD%BF%E7%94%A8Web%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99/">eNSP使用Web登录华为USG6000V防火墙控制台</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="拓扑图"><a href="#拓扑图" class="headerlink" title="拓扑图"></a>拓扑图</h3><p><img src="https://img1.socomic.net/static/20230228-tuoputu.png"></p>
<h3 id="配置Cloud"><a href="#配置Cloud" class="headerlink" title="配置Cloud"></a>配置Cloud</h3><p><img src="https://img1.socomic.net/static/Snipaste_2023-02-28_17-48-00.png"></p>
<h3 id="防火墙配置"><a href="#防火墙配置" class="headerlink" title="防火墙配置"></a>防火墙配置</h3><p><img src="https://img1.socomic.net/static/Snipaste_2023-02-28_17-51-00.png"></p>
<h4 id="端口配置"><a href="#端口配置" class="headerlink" title="端口配置"></a>端口配置</h4><p>进入防火墙的G0&#x2F;0&#x2F;0 端口进行设置<br><code>int g0/0/0</code><br>查看端口默认配置信息<br><code>display this</code><br>IP设置（删除默认的管理接口配置）<br><img src="https://img1.socomic.net/static/20230228-fhq1.png"></p>
<p>-非必要作-删除防火墙端口默认配置</p>
<p><code>undo ip add 192.168.0.1 24</code> </p>
<p>查看外部网络配置信息<br><img src="https://img1.socomic.net/static/Snipaste_2023-02-28_17-55-07.png"></p>
<p>外部网卡同一网段的IP地址</p>
<p><code>ip add 192.168.15.1 24</code> </p>
<p>开启所有管理服务</p>
<p><code>service-manage all permit</code> </p>
<h4 id="保存配置并查看结果"><a href="#保存配置并查看结果" class="headerlink" title="保存配置并查看结果"></a>保存配置并查看结果</h4><p>退出端口配置模式<br><code>qute</code><br>退出系统配置模式<br><code>qute</code><br>保存<br><code>save</code></p>
<p>配置完成后,就可以在外部浏览器输入IP访问这个管理页面了</p>
<p><img src="https://img1.socomic.net/static/Snipaste_2023-02-28_17-24-34.png"></p>
<h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p>CSDN-<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44685429/article/details/111524529">华为eNSP的防火墙（USG6000V）如何使用Web界面登入</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xinyuu.socomic.net/2023/02/28/eNSP%E4%BD%BF%E7%94%A8Web%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99/" data-id="clepsbgqg00043ssx5gfkd7rp" data-title="eNSP使用Web登录华为USG6000V防火墙控制台" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eNSP/" rel="tag">eNSP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99/" rel="tag">华为防火墙</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-PHP-MYSQL实现翻页功能" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/25/PHP-MYSQL%E5%AE%9E%E7%8E%B0%E7%BF%BB%E9%A1%B5%E5%8A%9F%E8%83%BD/" class="article-date">
  <time class="dt-published" datetime="2023-02-25T12:16:37.000Z" itemprop="datePublished">2023-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/25/PHP-MYSQL%E5%AE%9E%E7%8E%B0%E7%BF%BB%E9%A1%B5%E5%8A%9F%E8%83%BD/">PHP+MYSQL实现翻页功能</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="为什么要做分页功能"><a href="#为什么要做分页功能" class="headerlink" title="为什么要做分页功能"></a>为什么要做分页功能</h4><p>分页功能可以在个别网络环境较差的情况下大幅缩短浏览器对资源的响应时间，且分页后网页更加美观规整。</p>
<h4 id="后台实现"><a href="#后台实现" class="headerlink" title="后台实现"></a>后台实现</h4><h5 id="构建SQL语句"><a href="#构建SQL语句" class="headerlink" title="构建SQL语句"></a>构建SQL语句</h5><p>分页其实利用的是<code>MySQL</code>中<code>limit</code>关键字来实现的，例如我们查询一个表中的前四条数据：</p>
<p><code>SELECT * FROM acgtime.bangumi WHERE title LIKE &#39;%$word%&#39; AND status LIKE &#39;%$week%&#39; LIMIT 0,4;</code></p>
<p>limit后需要两个参数，第一个参数代表从第几条开始取；第二个参数代表一次取几条。<br>那么上述SQL语句表达的意思为从第 0 条开始取，取 4条（实则 0 为第 1 条，计数从 0 开始）。</p>
<p>我们把取到的前四条数据作为第一页。</p>
<p>那么继续取第二页，还是 4 条数据，则SQL语句为：<br><code>SELECT * FROM acgtime.bangumi WHERE title LIKE &#39;%$word%&#39; AND status LIKE &#39;%$week%&#39; LIMIT 4,4;</code></p>
<h5 id="第三页："><a href="#第三页：" class="headerlink" title="第三页："></a>第三页：</h5><p><code>SELECT * FROM acgtime.bangumi WHERE title LIKE &#39;%$word%&#39; AND status LIKE &#39;%$week%&#39; LIMIT 9,4;</code></p>
<h5 id="定义每页显示的条数"><a href="#定义每页显示的条数" class="headerlink" title="定义每页显示的条数"></a>定义每页显示的条数</h5><p><code>$pageSize = 4;</code></p>
<h5 id="定义当前页"><a href="#定义当前页" class="headerlink" title="定义当前页"></a>定义当前页</h5><p><code>$page = 1;</code></p>
<h5 id="计算limt需要的第一个参数"><a href="#计算limt需要的第一个参数" class="headerlink" title="计算limt需要的第一个参数"></a>计算<code>limt</code>需要的第一个参数</h5><p><code>$start = ($page - 1) * $pageSize;</code></p>
<p>所以SQL语句为：</p>
<p><code>SELECT * FROM acgtime.bangumi WHERE title LIKE &#39;%$word%&#39; AND status LIKE &#39;%$week%&#39; LIMIT $start,$pageSize;</code></p>
<p>这时改变<code>$page</code>的值，就可以查询对应页的数据。</p>
<h5 id="通过地址栏传参得到-page参数来定义当前页"><a href="#通过地址栏传参得到-page参数来定义当前页" class="headerlink" title="通过地址栏传参得到$page参数来定义当前页"></a>通过地址栏传参得到<code>$page</code>参数来定义当前页</h5><p>为了更加的灵活我们通过地址栏传参得到想要显示的页数，所以第四步的代码改为：</p>
<p><code>if ($_GET[&#39;page&#39;]) &#123;     $page = $_GET[&#39;page&#39;];</code><br><code>&#125; else &#123;</code><br>    <code>$page = 1; // 接收不到按照 1 处理，即默认第 1 页</code><br><code>&#125;</code></p>
<h4 id="前端实现"><a href="#前端实现" class="headerlink" title="前端实现"></a>前端实现</h4><p>当点击<code>上一页</code>，我们需要给当前页<code>$page - 1</code>；<br>当点击<code>下一页</code>，我们需要给当前页<code>$page + 1</code>；</p>
<p>在当前页的基础上确定上一页：</p>
<p><code>$up = $page - 1;</code></p>
<p>在当前页的基础上确定下一页：</p>
<p><code>$next = $page + 1;</code></p>
<p>但是<code>$up</code>和<code>$next</code>并不是无限加减的，当已经是第一页的时候，<code>$up</code>不可再继续减，所以在确定上一页的时候需要加一个判断。</p>
<p><code>if ($page == 1) &#123;</code></p>
<p><code>$up = 1;</code> </p>
<p><code>&#125; else &#123;</code> </p>
<p><code>$up = $page - 1; </code></p>
<p><code>&#125;</code></p>
<p>同理，确定下一页的时候也需要判断，什么时候不可以继续下一页了呢？当当前页已经是最后一页的时候不可继续下一页，最后一页如何判定，取决于当前表的总条数，当前表如果有 10 条数据，每页显示 2 条，那么需要分 10 &#x2F; 2 &#x3D; 5 页，这个 5 就是最后一页，如果有 11 条数据，那么需要分 11 &#x2F; 2 &#x3D; 5.5 页，说明分 5 页还剩下 1 条，所以直接分 6 页，即向上取整，那么这个 6 就是最后一页。</p>
<p>求出总条数：</p>
<p><code>$query = mysqli_query($connect, $sql);</code><br><code>$num = mysqli_num_rows($query);</code></p>
<p>根据总条数和每页显示的条数求出需要分几页：</p>
<p><code>$totalPage = ceil($num / $pageSize)</code></p>
<p>所以在判断下一页的时候改为：</p>
<p><code>if ($page == $totalPage) &#123;</code><br>    <code>$next = $totalPage;</code><br><code>&#125; else &#123;</code><br>    <code>$next = $page + 1;</code>	<br><code>&#125;</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xinyuu.socomic.net/2023/02/25/PHP-MYSQL%E5%AE%9E%E7%8E%B0%E7%BF%BB%E9%A1%B5%E5%8A%9F%E8%83%BD/" data-id="clepsbgq900013ssx8ykx2o7g" data-title="PHP+MYSQL实现翻页功能" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/22/hello-world/" class="article-date">
  <time class="dt-published" datetime="2023-02-22T06:16:20.015Z" itemprop="datePublished">2023-02-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/22/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://xinyuu.socomic.net/2023/02/22/hello-world/" data-id="clepsbgqn000j3ssx2uvxhb76" data-title="Hello World" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eNSP/" rel="tag">eNSP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%8E%E4%B8%BA%E8%AE%BE%E5%A4%87%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/" rel="tag">华为设备项目实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99/" rel="tag">华为防火墙</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/eNSP/" style="font-size: 20px;">eNSP</a> <a href="/tags/%E5%8D%8E%E4%B8%BA%E8%AE%BE%E5%A4%87%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/" style="font-size: 13.33px;">华为设备项目实践</a> <a href="/tags/%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99/" style="font-size: 16.67px;">华为防火墙</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/03/03/eNSP%E4%BD%BF%E7%94%A8SSH%E7%99%BB%E5%BD%95%E9%98%B2%E7%81%AB%E5%A2%99/">eNSP使用SSH登录防火墙</a>
          </li>
        
          <li>
            <a href="/2023/03/02/eNSP%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%85%8D%E7%BD%AE/">eNSP交换机VLAN配置</a>
          </li>
        
          <li>
            <a href="/2023/03/01/eNSP%E4%BD%BF%E7%94%A8%E8%B7%AF%E7%94%B1%E5%99%A8Telnet%E8%BF%9E%E6%8E%A5%E5%8D%8E%E4%B8%BAUSG6000V%E9%98%B2%E7%81%AB%E5%A2%99/">eNSP使用路由器Telnet连接华为USG6000V防火墙</a>
          </li>
        
          <li>
            <a href="/2023/03/01/eNSP%E4%BD%BF%E7%94%A8Telnet%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87/">eNSP使用Telnet登录华为网络设备</a>
          </li>
        
          <li>
            <a href="/2023/02/28/eNSP%E4%BD%BF%E7%94%A8Web%E7%99%BB%E5%BD%95%E5%8D%8E%E4%B8%BA%E9%98%B2%E7%81%AB%E5%A2%99/">eNSP使用Web登录华为USG6000V防火墙控制台</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 Xinyuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>